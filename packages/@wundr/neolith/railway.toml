# =============================================================================
# Neolith Railway Deployment Configuration
# =============================================================================
# This configuration deploys the Neolith web application to Railway.
#
# Prerequisites:
#   - Railway CLI installed: npm install -g @railway/cli
#   - Login to Railway: railway login
#   - Link project: railway link
#
# Deployment:
#   railway up
#
# =============================================================================

[build]
builder = "NIXPACKS"
buildCommand = "pnpm install && pnpm run build"
watchPatterns = ["apps/web/**", "packages/**"]

[deploy]
startCommand = "pnpm --filter @neolith/web start"
healthcheckPath = "/api/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
numReplicas = 1

[env]
NODE_ENV = "production"
PORT = "3000"
# Note: Set these in Railway dashboard or with railway variables set
# DATABASE_URL = "postgresql://..."
# AUTH_SECRET = "..."
# NEXTAUTH_URL = "https://your-app.railway.app"
