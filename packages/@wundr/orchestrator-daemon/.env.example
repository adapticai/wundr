# ===========================================
# Orchestrator Daemon Configuration
# ===========================================
# This file contains all environment variables used by the orchestrator-daemon.
# Copy this file to .env and fill in your actual values.

# ===========================================
# OpenAI API Configuration (REQUIRED)
# ===========================================
# Your OpenAI API key - required for AI-powered session orchestration
OPENAI_API_KEY=sk-your-api-key-here

# OpenAI model to use (default: gpt-5-mini)
# Options: gpt-5, gpt-5-mini, gpt-4.1, gpt-4.1-mini, gpt-4.1-nano, o1, o1-mini, o3, o3-mini, o4-mini
OPENAI_MODEL=gpt-5-mini

# OpenAI organization ID (optional)
OPENAI_ORG_ID=

# OpenAI base URL (optional, for custom endpoints)
OPENAI_BASE_URL=

# ===========================================
# Anthropic API Configuration (OPTIONAL)
# ===========================================
# Alternative AI provider - if you prefer Claude models
ANTHROPIC_API_KEY=

# Anthropic model to use (default: claude-3-sonnet-20240229)
# Options: claude-3-opus-20240229, claude-3-sonnet-20240229, claude-3-haiku-20240307
ANTHROPIC_MODEL=claude-3-sonnet-20240229

# ===========================================
# Daemon Server Configuration
# ===========================================
# Port the WebSocket server listens on (default: 8787)
DAEMON_PORT=8787
ORCHESTRATOR_DAEMON_PORT=8787

# Host the server binds to (default: 127.0.0.1)
# Use 0.0.0.0 to accept connections from any network interface
DAEMON_HOST=127.0.0.1
ORCHESTRATOR_DAEMON_HOST=127.0.0.1

# Maximum number of concurrent sessions (default: 100)
DAEMON_MAX_SESSIONS=100
ORCHESTRATOR_MAX_SESSIONS=100

# Enable verbose logging (default: false)
DAEMON_VERBOSE=false
ORCHESTRATOR_VERBOSE=false

# Daemon name/identifier (default: orchestrator-daemon)
DAEMON_NAME=orchestrator-daemon

# ===========================================
# Heartbeat and Health Configuration
# ===========================================
# Interval for health checks in milliseconds (default: 30000 = 30s)
DAEMON_HEARTBEAT_INTERVAL=30000

# Interval for overall health check in milliseconds (default: 60000 = 1min)
DAEMON_HEALTH_CHECK_INTERVAL=60000

# Timeout for graceful shutdown in milliseconds (default: 10000 = 10s)
DAEMON_SHUTDOWN_TIMEOUT=10000

# ===========================================
# Redis Configuration (OPTIONAL)
# ===========================================
# Required for distributed features and session migration
# Leave empty to run in standalone mode
REDIS_URL=redis://localhost:6379

# Redis password (if authentication is enabled)
REDIS_PASSWORD=

# Redis database number (default: 0)
REDIS_DB=0

# Redis connection timeout in milliseconds (default: 5000)
REDIS_CONNECT_TIMEOUT=5000

# ===========================================
# PostgreSQL Configuration (OPTIONAL)
# ===========================================
# Required for persistent storage of sessions and metrics
# Leave empty to use in-memory storage only
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/orchestrator

# Database connection pool size (default: 10)
DATABASE_POOL_SIZE=10

# Database connection timeout in milliseconds (default: 5000)
DATABASE_CONNECT_TIMEOUT=5000

# ===========================================
# Distributed Session Management (OPTIONAL)
# ===========================================
# Cluster name for distributed daemon orchestration
CLUSTER_NAME=orchestrator-cluster

# Load balancing strategy (default: least-loaded)
# Options: round-robin, least-loaded, weighted, hash-based
LOAD_BALANCING_STRATEGY=least-loaded

# Interval for session rebalancing in milliseconds (default: 300000 = 5min)
REBALANCE_INTERVAL=300000

# Session migration timeout in milliseconds (default: 30000 = 30s)
MIGRATION_TIMEOUT=30000

# ===========================================
# Neolith Integration (OPTIONAL)
# ===========================================
# URL of the Neolith API server
NEOLITH_API_URL=http://localhost:3000

# Neolith API authentication key
NEOLITH_API_KEY=

# Neolith API secret
NEOLITH_API_SECRET=

# ===========================================
# Logging Configuration
# ===========================================
# Log level: debug, info, warn, error (default: info)
LOG_LEVEL=info

# Log format: json, text (default: json)
LOG_FORMAT=json

# Log file path (optional, logs to stdout if not specified)
LOG_FILE=

# Enable log rotation (default: true)
LOG_ROTATION_ENABLED=true

# Max log file size in MB before rotation (default: 10)
LOG_MAX_SIZE=10

# Number of rotated log files to keep (default: 5)
LOG_MAX_FILES=5

# ===========================================
# Security Configuration
# ===========================================
# JWT secret for session authentication (CHANGE THIS IN PRODUCTION!)
DAEMON_JWT_SECRET=change-this-in-production-to-a-random-secure-string

# JWT token expiration time (default: 24h)
DAEMON_JWT_EXPIRATION=24h

# Enable CORS (default: false)
DAEMON_CORS_ENABLED=false

# CORS allowed origins (comma-separated)
DAEMON_CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# Enable rate limiting (default: true)
DAEMON_RATE_LIMIT_ENABLED=true

# Max requests per window (default: 100)
DAEMON_RATE_LIMIT_MAX=100

# Rate limit window in milliseconds (default: 60000 = 1min)
DAEMON_RATE_LIMIT_WINDOW=60000

# ===========================================
# Monitoring and Metrics (OPTIONAL)
# ===========================================
# Enable Prometheus metrics endpoint (default: true)
METRICS_ENABLED=true

# Port for Prometheus metrics endpoint (default: 9090)
METRICS_PORT=9090

# Metrics endpoint path (default: /metrics)
METRICS_PATH=/metrics

# Enable health check endpoint (default: true)
HEALTH_CHECK_ENABLED=true

# Health check endpoint path (default: /health)
HEALTH_CHECK_PATH=/health

# ===========================================
# Memory Management
# ===========================================
# Maximum heap memory in MB (default: 2048)
DAEMON_MAX_HEAP_MB=2048

# Maximum context tokens per session (default: 128000)
DAEMON_MAX_CONTEXT_TOKENS=128000

# Enable memory compaction (default: true)
MEMORY_COMPACTION_ENABLED=true

# Memory compaction threshold (0.0-1.0, default: 0.8)
MEMORY_COMPACTION_THRESHOLD=0.8

# ===========================================
# Token Budget Configuration
# ===========================================
# Daily token budget (default: 1000000)
TOKEN_BUDGET_DAILY=1000000

# Weekly token budget (default: 5000000)
TOKEN_BUDGET_WEEKLY=5000000

# Monthly token budget (default: 20000000)
TOKEN_BUDGET_MONTHLY=20000000

# Enable budget alerts (default: true)
TOKEN_BUDGET_ALERTS_ENABLED=true

# Budget alert threshold (0.0-1.0, default: 0.8 = 80%)
TOKEN_BUDGET_ALERT_THRESHOLD=0.8

# ===========================================
# Development/Testing Configuration
# ===========================================
# Node environment (development, production, test)
NODE_ENV=development

# Enable debug mode (default: false)
DEBUG=false

# Disable SSL certificate validation (ONLY for development!)
NODE_TLS_REJECT_UNAUTHORIZED=1
